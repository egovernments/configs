serviceMaps:
  serviceName: project
  mappings:
    - version: 1.0
      description: Saves a project task
      fromTopic: save-project-task-health-topic
      isTransaction: true
      isAuditEnabled: true
      module: PROJECT
      objecIdJsonPath: $.Tasks.*.id
      tenantIdJsonPath: $.Tasks.*.tenantId
      userUuidJsonPath: $.RequestInfo.userInfo.uuid
      transactionCodeJsonPath: $.Tasks.*.clientReferenceId
      auditAttributeBasePath: $.Tasks.*
      queryMaps:
        - query: INSERT INTO health.PROJECT_TASK(id, clientReferenceId, tenantId, projectId, projectBeneficiaryId, projectBeneficiaryClientReferenceId, plannedStartDate, plannedEndDate, actualStartDate, actualEndDate, addressId, status, additionalDetails, createdBy, createdTime, lastModifiedBy, lastModifiedTime, rowVersion, isDeleted, clientCreatedTime, clientLastModifiedTime, clientCreatedBy, clientLastModifiedBy) VALUES (?, ?, ?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);
          basePath: $.Tasks.*
          jsonMaps:
            - jsonPath: $.Tasks.*.id
            - jsonPath: $.Tasks.*.clientReferenceId
            - jsonPath: $.Tasks.*.tenantId
            - jsonPath: $.Tasks.*.projectId
            - jsonPath: $.Tasks.*.projectBeneficiaryId
            - jsonPath: $.Tasks.*.projectBeneficiaryClientReferenceId
            - jsonPath: $.Tasks.*.plannedStartDate
            - jsonPath: $.Tasks.*.plannedEndDate
            - jsonPath: $.Tasks.*.actualStartDate
            - jsonPath: $.Tasks.*.actualEndDate
            - jsonPath: $.Tasks.*.address.id
            - jsonPath: $.Tasks.*.status
            - jsonPath: $.Tasks.*.additionalFields
              type: JSON
              dbType: JSONB
            - jsonPath: $.Tasks.*.auditDetails.createdBy
            - jsonPath: $.Tasks.*.auditDetails.createdTime
            - jsonPath: $.Tasks.*.auditDetails.lastModifiedBy
            - jsonPath: $.Tasks.*.auditDetails.lastModifiedTime
            - jsonPath: $.Tasks.*.rowVersion
            - jsonPath: $.Tasks.*.isDeleted
            - jsonPath: $.Tasks.*.clientAuditDetails.createdTime
            - jsonPath: $.Tasks.*.clientAuditDetails.lastModifiedTime
            - jsonPath: $.Tasks.*.clientAuditDetails.createdBy
            - jsonPath: $.Tasks.*.clientAuditDetails.lastModifiedBy

        - query: INSERT INTO health.ADDRESS(id, clientReferenceId, tenantid, doorno, latitude, longitude, locationAccuracy, type, addressline1, addressline2, landmark, city, pincode, buildingName, street, localityCode) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
          basePath: $.Tasks.*.address
          jsonMaps:
            - jsonPath: $.Tasks.*.address.id
            - jsonPath: $.Tasks.*.address.clientReferenceId
            - jsonPath: $.Tasks.*.address.tenantId
            - jsonPath: $.Tasks.*.address.doorNo
            - jsonPath: $.Tasks.*.address.latitude
            - jsonPath: $.Tasks.*.address.longitude
            - jsonPath: $.Tasks.*.address.locationAccuracy
            - jsonPath: $.Tasks.*.address.type
            - jsonPath: $.Tasks.*.address.addressLine1
            - jsonPath: $.Tasks.*.address.addressLine2
            - jsonPath: $.Tasks.*.address.landmark
            - jsonPath: $.Tasks.*.address.city
            - jsonPath: $.Tasks.*.address.pincode
            - jsonPath: $.Tasks.*.address.buildingName
            - jsonPath: $.Tasks.*.address.street
            - jsonPath: $.Tasks.*.address.locality.code

        - query: INSERT INTO health.TASK_RESOURCE(id, clientReferenceId, tenantid, productvariantid, taskid, quantity, isDelivered, reasonIfNotDelivered, createdBy, createdTime, lastModifiedBy, lastModifiedTime, isDeleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?);
          basePath: $.Tasks.*.resources.*
          jsonMaps:
            - jsonPath: $.Tasks.*.resources.*.id
            - jsonPath: $.Tasks.*.resources.*.clientReferenceId
            - jsonPath: $.Tasks.*.resources.*.tenantId
            - jsonPath: $.Tasks.*.resources.*.productVariantId
            - jsonPath: $.Tasks.*.resources.*.taskId
            - jsonPath: $.Tasks.*.resources.*.quantity
            - jsonPath: $.Tasks.*.resources.*.isDelivered
            - jsonPath: $.Tasks.*.resources.*.deliveryComment
            - jsonPath: $.Tasks.*.resources.*.auditDetails.createdBy
            - jsonPath: $.Tasks.*.resources.*.auditDetails.createdTime
            - jsonPath: $.Tasks.*.resources.*.auditDetails.lastModifiedBy
            - jsonPath: $.Tasks.*.resources.*.auditDetails.lastModifiedTime
            - jsonPath: $.Tasks.*.resources.*.isDeleted

    - version: 1.0
      description: Updates a project task
      fromTopic: update-project-task-health-topic
      isTransaction: true
      isAuditEnabled: true
      module: PROJECT
      objecIdJsonPath: $.Tasks.*.id
      tenantIdJsonPath: $.Tasks.*.tenantId
      userUuidJsonPath: $.RequestInfo.userInfo.uuid
      transactionCodeJsonPath: $.Tasks.*.clientReferenceId
      auditAttributeBasePath: $.Tasks.*
      queryMaps:
        - query: UPDATE health.PROJECT_TASK SET tenantId = ?, projectId = ?, projectBeneficiaryId = ?, projectBeneficiaryClientReferenceId = ?, addressId = ?, plannedStartDate = ?, plannedEndDate = ?, actualStartDate = ?, actualEndDate = ?, status = ?, additionalDetails = ?, lastModifiedBy = ?, lastModifiedTime = ?, rowVersion = ?, isDeleted = ?, clientLastModifiedTime = ?, clientLastModifiedBy = ? WHERE ID = ?;
          basePath: $.Tasks.*
          jsonMaps:
            - jsonPath: $.Tasks.*.tenantId
            - jsonPath: $.Tasks.*.projectId
            - jsonPath: $.Tasks.*.projectBeneficiaryId
            - jsonPath: $.Tasks.*.projectBeneficiaryClientReferenceId
            - jsonPath: $.Tasks.*.address.id
            - jsonPath: $.Tasks.*.plannedStartDate
            - jsonPath: $.Tasks.*.plannedEndDate
            - jsonPath: $.Tasks.*.actualStartDate
            - jsonPath: $.Tasks.*.actualEndDate
            - jsonPath: $.Tasks.*.status
            - jsonPath: $.Tasks.*.additionalFields
              type: JSON
              dbType: JSONB
            - jsonPath: $.Tasks.*.auditDetails.lastModifiedBy
            - jsonPath: $.Tasks.*.auditDetails.lastModifiedTime
            - jsonPath: $.Tasks.*.rowVersion
            - jsonPath: $.Tasks.*.isDeleted
            - jsonPath: $.Tasks.*.clientAuditDetails.lastModifiedTime
            - jsonPath: $.Tasks.*.clientAuditDetails.lastModifiedBy
            - jsonPath: $.Tasks.*.id

        - query: UPDATE health.ADDRESS SET tenantId = ?, doorno = ?, latitude = ?, longitude = ?, locationAccuracy = ?, type = ?, addressline1 = ?, addressline2 = ?, landmark = ?, city = ?, pincode = ?, buildingName = ?, street = ?, localityCode = ? WHERE ID = ?;
          basePath: $.Tasks.*.address
          jsonMaps:
            - jsonPath: $.Tasks.*.address.tenantId
            - jsonPath: $.Tasks.*.address.doorNo
            - jsonPath: $.Tasks.*.address.latitude
            - jsonPath: $.Tasks.*.address.longitude
            - jsonPath: $.Tasks.*.address.locationAccuracy
            - jsonPath: $.Tasks.*.address.type
            - jsonPath: $.Tasks.*.address.addressLine1
            - jsonPath: $.Tasks.*.address.addressLine2
            - jsonPath: $.Tasks.*.address.landmark
            - jsonPath: $.Tasks.*.address.city
            - jsonPath: $.Tasks.*.address.pincode
            - jsonPath: $.Tasks.*.address.buildingName
            - jsonPath: $.Tasks.*.address.street
            - jsonPath: $.Tasks.*.address.locality.code
            - jsonPath: $.Tasks.*.address.id

        - query: INSERT INTO health.TASK_RESOURCE(id, clientReferenceId, tenantid, productvariantid, taskid, quantity, isDelivered, reasonIfNotDelivered, createdBy, createdTime, lastModifiedBy, lastModifiedTime, isDeleted) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?) ON CONFLICT (id) DO UPDATE SET tenantid = ?, taskid = ?, productvariantid = ?, quantity = ?, isDelivered = ?, reasonIfNotDelivered = ?, lastModifiedBy = ?, lastModifiedTime = ?;
          basePath: $.Tasks.*.resources.*
          jsonMaps:
            - jsonPath: $.Tasks.*.resources.*.id
            - jsonPath: $.Tasks.*.resources.*.clientReferenceId
            - jsonPath: $.Tasks.*.resources.*.tenantId
            - jsonPath: $.Tasks.*.resources.*.productVariantId
            - jsonPath: $.Tasks.*.resources.*.taskId
            - jsonPath: $.Tasks.*.resources.*.quantity
            - jsonPath: $.Tasks.*.resources.*.isDelivered
            - jsonPath: $.Tasks.*.resources.*.deliveryComment
            - jsonPath: $.Tasks.*.resources.*.auditDetails.createdBy
            - jsonPath: $.Tasks.*.resources.*.auditDetails.createdTime
            - jsonPath: $.Tasks.*.resources.*.auditDetails.lastModifiedBy
            - jsonPath: $.Tasks.*.resources.*.auditDetails.lastModifiedTime
            - jsonPath: $.Tasks.*.resources.*.isDeleted
            - jsonPath: $.Tasks.*.resources.*.tenantId
            - jsonPath: $.Tasks.*.resources.*.taskId
            - jsonPath: $.Tasks.*.resources.*.productVariantId
            - jsonPath: $.Tasks.*.resources.*.quantity
            - jsonPath: $.Tasks.*.resources.*.isDelivered
            - jsonPath: $.Tasks.*.resources.*.deliveryComment
            - jsonPath: $.Tasks.*.resources.*.auditDetails.lastModifiedBy
            - jsonPath: $.Tasks.*.resources.*.auditDetails.lastModifiedTime

    - version: 1.0
      description: Deletes a project task
      fromTopic: delete-project-task-health-topic
      isTransaction: true
      isAuditEnabled: true
      module: PROJECT
      objecIdJsonPath: $.Tasks.*.id
      tenantIdJsonPath: $.Tasks.*.tenantId
      userUuidJsonPath: $.RequestInfo.userInfo.uuid
      transactionCodeJsonPath: $.Tasks.*.clientReferenceId
      auditAttributeBasePath: $.Tasks.*
      queryMaps:
        - query: UPDATE health.PROJECT_TASK SET lastModifiedBy = ?, lastModifiedTime = ?, clientLastModifiedTime = ?, clientLastModifiedBy = ?, rowVersion = ?, isDeleted = ?, additionalDetails=? WHERE ID = ?;
          basePath: $.Tasks.*
          jsonMaps:
            - jsonPath: $.Tasks.*.auditDetails.lastModifiedBy
            - jsonPath: $.Tasks.*.auditDetails.lastModifiedTime
            - jsonPath: $.Tasks.*.clientAuditDetails.lastModifiedTime
            - jsonPath: $.Tasks.*.clientAuditDetails.lastModifiedBy
            - jsonPath: $.Tasks.*.rowVersion
            - jsonPath: $.Tasks.*.isDeleted
            - jsonPath: $.Tasks.*.additionalFields
              type: JSON
              dbType: JSONB
            - jsonPath: $.Tasks.*.id
        - query: UPDATE health.TASK_RESOURCE SET lastModifiedBy = ?, lastModifiedTime = ?, isDeleted = ? WHERE ID = ?;
          basePath: $.Tasks.*.resources.*
          jsonMaps:
            - jsonPath: $.Tasks.*.auditDetails.lastModifiedBy
            - jsonPath: $.Tasks.*.auditDetails.lastModifiedTime
            - jsonPath: $.Tasks.*.isDeleted
            - jsonPath: $.Tasks.*.id

    - version: 1.0
      description: Saves a adverse event
      fromTopic: save-adverse-event-health-topic
      isTransaction: true
      isAuditEnabled: true
      module: PROJECT
      objecIdJsonPath: $.id
      tenantIdJsonPath: $.tenantId
      userUuidJsonPath: $.[0].auditDetails.createdBy
      transactionCodeJsonPath: $.clientReferenceId
      auditAttributeBasePath: $.*
      queryMaps:
        - query: INSERT INTO health.ADVERSE_EVENT(id, clientReferenceId, tenantId, taskId, taskClientReferenceId, symptoms, reAttempts, createdBy, createdTime, lastModifiedBy, lastModifiedTime, clientCreatedTime, clientLastModifiedTime, rowVersion, isDeleted) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);
          basePath: $.*
          jsonMaps:
            - jsonPath: $.*.id
            - jsonPath: $.*.clientReferenceId
            - jsonPath: $.*.tenantId
            - jsonPath: $.*.taskId
            - jsonPath: $.*.taskClientReferenceId
            - jsonPath: $.*.symptoms
              type: JSON
              dbType: JSONB
            - jsonPath: $.*.reAttempts
            - jsonPath: $.*.auditDetails.createdBy
            - jsonPath: $.*.auditDetails.createdTime
            - jsonPath: $.*.auditDetails.lastModifiedBy
            - jsonPath: $.*.auditDetails.lastModifiedTime
            - jsonPath: $.*.clientAuditDetails.createdTime
            - jsonPath: $.*.clientAuditDetails.lastModifiedTime
            - jsonPath: $.*.rowVersion
            - jsonPath: $.*.isDeleted

    - version: 1.0
      description: Updates a adverse event
      fromTopic: update-adverse-event-health-topic
      isTransaction: true
      isAuditEnabled: true
      module: PROJECT
      objecIdJsonPath: $.id
      tenantIdJsonPath: $.tenantId
      userUuidJsonPath: $.[0].auditDetails.createdBy
      transactionCodeJsonPath: $.clientReferenceId
      auditAttributeBasePath: $.*
      queryMaps:
        - query: UPDATE health.ADVERSE_EVENT SET tenantId = ?, taskId = ?, taskClientReferenceId = ?, symptoms = ?, reAttempts = ?, lastModifiedBy = ?, lastModifiedTime = ?, clientLastModifiedTime = ?, rowVersion = ?, isDeleted = ? WHERE ID = ?;
          basePath: $.*
          jsonMaps:
            - jsonPath: $.*.tenantId
            - jsonPath: $.*.taskId
            - jsonPath: $.*.taskClientReferenceId
            - jsonPath: $.*.symptoms
              type: JSON
              dbType: JSONB
            - jsonPath: $.*.reAttempts
            - jsonPath: $.*.auditDetails.lastModifiedBy
            - jsonPath: $.*.auditDetails.lastModifiedTime
            - jsonPath: $.*.clientAuditDetails.lastModifiedTime
            - jsonPath: $.*.rowVersion
            - jsonPath: $.*.isDeleted
            - jsonPath: $.*.id

    - version: 1.0
      description: Deletes a adverse event
      fromTopic: delete-adverse-event-health-topic
      isTransaction: true
      isAuditEnabled: true
      module: PROJECT
      objecIdJsonPath: $.id
      tenantIdJsonPath: $.tenantId
      userUuidJsonPath: $.[0].auditDetails.createdBy
      transactionCodeJsonPath: $.clientReferenceId
      auditAttributeBasePath: $.*
      queryMaps:
        - query: UPDATE health.ADVERSE_EVENT SET lastModifiedBy = ?, lastModifiedTime = ?, clientLastModifiedTime = ?, rowVersion = ?, isDeleted = ? WHERE ID = ?;
          basePath: $.*
          jsonMaps:
            - jsonPath: $.*.auditDetails.lastModifiedBy
            - jsonPath: $.*.auditDetails.lastModifiedTime
            - jsonPath: $.*.clientAuditDetails.lastModifiedTime
            - jsonPath: $.*.rowVersion
            - jsonPath: $.*.isDeleted
            - jsonPath: $.*.id