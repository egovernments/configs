serviceMaps:
  serviceName: stock
  mappings:
    - version: 1.0
      description: Saves a stock
      fromTopic: save-stock-health-topic
      isTransaction: true
      isAuditEnabled: true
      module: STOCK
      objecIdJsonPath: $.Stock.*.id
      tenantIdJsonPath: $.Stock.*.tenantId
      userUuidJsonPath: $.RequestInfo.userInfo.uuid
      transactionCodeJsonPath: $.Stock.*.clientReferenceId
      auditAttributeBasePath: $.Stock.*
      queryMaps:
        - query: INSERT INTO health.STOCK(id, clientReferenceId, tenantId, productVariantId, wayBillNumber, quantity, referenceId, referenceIdType, transactionType, transactionReason, senderType, senderId, receiverType, receiverId, additionalDetails, createdBy, createdTime, lastModifiedBy, lastModifiedTime, rowVersion, isDeleted, dateOfEntry, clientCreatedTime, clientLastModifiedTime, clientCreatedBy, clientLastModifiedBy) VALUES (?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);
          basePath: $.Stock.*
          jsonMaps:
            - jsonPath: $.Stock.*.id
            - jsonPath: $.Stock.*.clientReferenceId
            - jsonPath: $.Stock.*.tenantId
            - jsonPath: $.Stock.*.productVariantId
            - jsonPath: $.Stock.*.wayBillNumber
            - jsonPath: $.Stock.*.quantity
            - jsonPath: $.Stock.*.referenceId
            - jsonPath: $.Stock.*.referenceIdType
            - jsonPath: $.Stock.*.transactionType
            - jsonPath: $.Stock.*.transactionReason
            - jsonPath: $.Stock.*.senderType
            - jsonPath: $.Stock.*.senderId
            - jsonPath: $.Stock.*.receiverType
            - jsonPath: $.Stock.*.receiverId
            - jsonPath: $.Stock.*.additionalFields
              type: JSON
              dbType: JSONB
            - jsonPath: $.Stock.*.auditDetails.createdBy
            - jsonPath: $.Stock.*.auditDetails.createdTime
            - jsonPath: $.Stock.*.auditDetails.lastModifiedBy
            - jsonPath: $.Stock.*.auditDetails.lastModifiedTime
            - jsonPath: $.Stock.*.rowVersion
            - jsonPath: $.Stock.*.isDeleted
            - jsonPath: $.Stock.*.dateOfEntry
            - jsonPath: $.Stock.*.clientAuditDetails.createdTime
            - jsonPath: $.Stock.*.clientAuditDetails.lastModifiedTime
            - jsonPath: $.Stock.*.clientAuditDetails.createdBy
            - jsonPath: $.Stock.*.clientAuditDetails.lastModifiedBy

    - version: 1.0
      description: Updates a stock
      fromTopic: update-stock-health-topic
      isTransaction: true
      isAuditEnabled: true
      module: STOCK
      objecIdJsonPath: $.Stock.*.id
      tenantIdJsonPath: $.Stock.*.tenantId
      userUuidJsonPath: $.RequestInfo.userInfo.uuid
      transactionCodeJsonPath: $.Stock.*.clientReferenceId
      auditAttributeBasePath: $.Stock.*
      queryMaps:
        - query: UPDATE health.STOCK SET tenantId=?, dateOfEntry = ?, productVariantId=?, wayBillNumber=?, quantity=?, referenceId=?, referenceIdType=?, transactionType=?, transactionReason=?, senderType=?, senderId=?, receiverType=?, receiverId=?, additionalDetails=?, lastModifiedBy=?, lastModifiedTime=?, rowVersion=?, clientLastModifiedTime = ?, clientLastModifiedBy = ? WHERE id=? AND isDeleted=false;
          basePath: $.Stock.*
          jsonMaps:
            - jsonPath: $.Stock.*.tenantId
            - jsonPath: $.Stock.*.dateOfEntry
            - jsonPath: $.Stock.*.productVariantId
            - jsonPath: $.Stock.*.wayBillNumber
            - jsonPath: $.Stock.*.quantity
            - jsonPath: $.Stock.*.referenceId
            - jsonPath: $.Stock.*.referenceIdType
            - jsonPath: $.Stock.*.transactionType
            - jsonPath: $.Stock.*.transactionReason
            - jsonPath: $.Stock.*.senderType
            - jsonPath: $.Stock.*.senderId
            - jsonPath: $.Stock.*.receiverType
            - jsonPath: $.Stock.*.receiverId
            - jsonPath: $.Stock.*.additionalFields
              type: JSON
              dbType: JSONB
            - jsonPath: $.Stock.*.auditDetails.lastModifiedBy
            - jsonPath: $.Stock.*.auditDetails.lastModifiedTime
            - jsonPath: $.Stock.*.rowVersion
            - jsonPath: $.Stock.*.clientAuditDetails.lastModifiedTime
            - jsonPath: $.Stock.*.clientAuditDetails.lastModifiedBy
            - jsonPath: $.Stock.*.id

    - version: 1.0
      description: Deletes a stock
      fromTopic: delete-stock-health-topic
      isTransaction: true
      isAuditEnabled: true
      module: STOCK
      objecIdJsonPath: $.Stock.*.id
      tenantIdJsonPath: $.Stock.*.tenantId
      userUuidJsonPath: $.RequestInfo.userInfo.uuid
      transactionCodeJsonPath: $.Stock.*.clientReferenceId
      auditAttributeBasePath: $.Stock.*
      queryMaps:
        - query: UPDATE health.STOCK SET lastModifiedBy=?, lastModifiedTime=?, clientLastModifiedTime = ?, clientLastModifiedBy = ?, rowVersion=?, isDeleted=?, additionalDetails=? WHERE id=?;
          basePath: $.Stock.*
          jsonMaps:
            - jsonPath: $.Stock.*.auditDetails.lastModifiedBy
            - jsonPath: $.Stock.*.auditDetails.lastModifiedTime
            - jsonPath: $.Stock.*.clientAuditDetails.lastModifiedTime
            - jsonPath: $.Stock.*.clientAuditDetails.lastModifiedBy
            - jsonPath: $.Stock.*.rowVersion
            - jsonPath: $.Stock.*.isDeleted
            - jsonPath: $.Stock.*.additionalFields
              type: JSON
              dbType: JSONB
            - jsonPath: $.Stock.*.id


    - version: 1.0
      description: Saves a stock reconciliation
      fromTopic: save-stock-reconciliation-health-topic
      isTransaction: true
      isAuditEnabled: true
      module: STOCK
      objecIdJsonPath: $.StockReconciliation.*.id
      tenantIdJsonPath: $.StockReconciliation.*.tenantId
      userUuidJsonPath: $.RequestInfo.userInfo.uuid
      transactionCodeJsonPath: $.StockReconciliation.*.clientReferenceId
      auditAttributeBasePath: $.StockReconciliation.*
      queryMaps:
        - query: INSERT INTO health.STOCK_RECONCILIATION_LOG(id, clientReferenceId, tenantId, facilityId, dateOfReconciliation, calculatedCount, physicalRecordedCount, commentsOnReconciliation, productVariantId, referenceId, referenceIdType, additionalDetails, createdBy, createdTime, lastModifiedBy, lastModifiedTime, rowVersion, isDeleted,clientCreatedTime, clientLastModifiedTime, clientCreatedBy, clientLastModifiedBy) VALUES (?, ?, ?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?,?);
          basePath: $.StockReconciliation.*
          jsonMaps:
            - jsonPath: $.StockReconciliation.*.id
            - jsonPath: $.StockReconciliation.*.clientReferenceId
            - jsonPath: $.StockReconciliation.*.tenantId
            - jsonPath: $.StockReconciliation.*.facilityId
            - jsonPath: $.StockReconciliation.*.dateOfReconciliation
            - jsonPath: $.StockReconciliation.*.calculatedCount
            - jsonPath: $.StockReconciliation.*.physicalCount
            - jsonPath: $.StockReconciliation.*.commentsOnReconciliation
            - jsonPath: $.StockReconciliation.*.productVariantId
            - jsonPath: $.StockReconciliation.*.referenceId
            - jsonPath: $.StockReconciliation.*.referenceIdType
            - jsonPath: $.StockReconciliation.*.additionalFields
              type: JSON
              dbType: JSONB
            - jsonPath: $.StockReconciliation.*.auditDetails.createdBy
            - jsonPath: $.StockReconciliation.*.auditDetails.createdTime
            - jsonPath: $.StockReconciliation.*.auditDetails.lastModifiedBy
            - jsonPath: $.StockReconciliation.*.auditDetails.lastModifiedTime
            - jsonPath: $.StockReconciliation.*.rowVersion
            - jsonPath: $.StockReconciliation.*.isDeleted
            - jsonPath: $.StockReconciliation.*.clientAuditDetails.createdTime
            - jsonPath: $.StockReconciliation.*.clientAuditDetails.lastModifiedTime
            - jsonPath: $.StockReconciliation.*.clientAuditDetails.createdBy
            - jsonPath: $.StockReconciliation.*.clientAuditDetails.lastModifiedBy

    - version: 1.0
      description: Updates a stock reconciliation
      fromTopic: update-stock-reconciliation-health-topic
      isTransaction: true
      isAuditEnabled: true
      module: STOCK
      objecIdJsonPath: $.StockReconciliation.*.id
      tenantIdJsonPath: $.StockReconciliation.*.tenantId
      userUuidJsonPath: $.RequestInfo.userInfo.uuid
      transactionCodeJsonPath: $.StockReconciliation.*.clientReferenceId
      auditAttributeBasePath: $.StockReconciliation.*
      queryMaps:
        - query: UPDATE health.STOCK_RECONCILIATION_LOG SET tenantId=?, facilityId=?, productVariantId=?, referenceId=?, referenceIdType=?, dateOfReconciliation=?, calculatedCount=?, physicalRecordedCount=?, commentsOnReconciliation=?, additionalDetails=?, lastModifiedBy=?, lastModifiedTime=?, rowVersion=?, clientLastModifiedTime = ?, clientLastModifiedBy = ? WHERE id=? AND isDeleted=false;
          basePath: $.StockReconciliation.*
          jsonMaps:
            - jsonPath: $.StockReconciliation.*.tenantId
            - jsonPath: $.StockReconciliation.*.facilityId
            - jsonPath: $.StockReconciliation.*.productVariantId
            - jsonPath: $.StockReconciliation.*.referenceId
            - jsonPath: $.StockReconciliation.*.referenceIdType
            - jsonPath: $.StockReconciliation.*.dateOfReconciliation
            - jsonPath: $.StockReconciliation.*.calculatedCount
            - jsonPath: $.StockReconciliation.*.physicalCount
            - jsonPath: $.StockReconciliation.*.commentsOnReconciliation
            - jsonPath: $.StockReconciliation.*.additionalFields
              type: JSON
              dbType: JSONB
            - jsonPath: $.StockReconciliation.*.auditDetails.lastModifiedBy
            - jsonPath: $.StockReconciliation.*.auditDetails.lastModifiedTime
            - jsonPath: $.StockReconciliation.*.rowVersion
            - jsonPath: $.StockReconciliation.*.clientAuditDetails.lastModifiedTime
            - jsonPath: $.StockReconciliation.*.clientAuditDetails.lastModifiedBy
            - jsonPath: $.StockReconciliation.*.id

    - version: 1.0
      description: Deletes a stock reconciliation
      fromTopic: delete-stock-reconciliation-health-topic
      isTransaction: true
      isAuditEnabled: true
      module: STOCK
      objecIdJsonPath: $.StockReconciliation.*.id
      tenantIdJsonPath: $.StockReconciliation.*.tenantId
      userUuidJsonPath: $.RequestInfo.userInfo.uuid
      transactionCodeJsonPath: $.StockReconciliation.*.clientReferenceId
      auditAttributeBasePath: $.StockReconciliation.*
      queryMaps:
        - query: UPDATE health.STOCK_RECONCILIATION_LOG SET lastModifiedBy=?, lastModifiedTime=?, clientLastModifiedTime = ?, clientLastModifiedBy = ?, rowVersion=?, isDeleted=?, additionalDetails=? WHERE id=?;
          basePath: $.StockReconciliation.*
          jsonMaps:
            - jsonPath: $.StockReconciliation.*.auditDetails.lastModifiedBy
            - jsonPath: $.StockReconciliation.*.auditDetails.lastModifiedTime
            - jsonPath: $.StockReconciliation.*.clientAuditDetails.lastModifiedTime
            - jsonPath: $.StockReconciliation.*.clientAuditDetails.lastModifiedBy
            - jsonPath: $.StockReconciliation.*.rowVersion
            - jsonPath: $.StockReconciliation.*.isDeleted
            - jsonPath: $.StockReconciliation.*.additionalFields
              type: JSON
              dbType: JSONB
            - jsonPath: $.StockReconciliation.*.id